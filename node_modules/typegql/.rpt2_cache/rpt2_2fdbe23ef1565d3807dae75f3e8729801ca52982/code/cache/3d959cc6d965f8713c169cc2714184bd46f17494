{"code":"import { GraphQLObjectType } from 'graphql';\r\nimport { ObjectTypeError, objectTypeRegistry } from '../index';\r\nimport { compileAllFields, fieldsRegistry } from '~/domains/field';\r\nimport { createCachedThunk, getClassWithAllParentClasses, } from '~/services/utils';\r\nconst compileOutputTypeCache = new WeakMap();\r\nfunction createTypeFieldsGetter(target) {\r\n    const targetWithParents = getClassWithAllParentClasses(target);\r\n    const hasFields = targetWithParents.some(ancestor => {\r\n        return !fieldsRegistry.isEmpty(ancestor);\r\n    });\r\n    if (!hasFields) {\r\n        throw new ObjectTypeError(target, `There are no fields inside this type.`);\r\n    }\r\n    return createCachedThunk(() => {\r\n        return compileAllFields(target);\r\n    });\r\n}\r\nexport function compileObjectTypeWithConfig(target, config) {\r\n    if (compileOutputTypeCache.has(target)) {\r\n        return compileOutputTypeCache.get(target);\r\n    }\r\n    const compiled = new GraphQLObjectType(Object.assign({}, config, { isTypeOf: value => value instanceof target, fields: createTypeFieldsGetter(target) }));\r\n    compileOutputTypeCache.set(target, compiled);\r\n    return compiled;\r\n}\r\nexport function compileObjectType(target) {\r\n    if (!objectTypeRegistry.has(target)) {\r\n        throw new ObjectTypeError(target, `Class is not registered. Make sure it's decorated with @ObjectType decorator`);\r\n    }\r\n    const compiler = objectTypeRegistry.get(target);\r\n    return compiler();\r\n}\r\n//# sourceMappingURL=objectType.js.map","map":"{\"version\":3,\"file\":\"objectType.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/domains/objectType/compiler/objectType.ts\"],\"names\":[],\"mappings\":\"AAAA,OAAO,EAAE,iBAAiB,EAAE,MAAM,SAAS,CAAC;AAC5C,OAAO,EAAE,eAAe,EAAE,kBAAkB,EAAE,MAAM,UAAU,CAAC;AAE/D,OAAO,EAAE,gBAAgB,EAAE,cAAc,EAAE,MAAM,iBAAiB,CAAC;AACnE,OAAO,EACL,iBAAiB,EACjB,4BAA4B,GAC7B,MAAM,kBAAkB,CAAC;AAE1B,MAAM,sBAAsB,GAAG,IAAI,OAAO,EAA+B,CAAC;AAO1E,SAAS,sBAAsB,CAAC,MAAgB;IAC9C,MAAM,iBAAiB,GAAG,4BAA4B,CAAC,MAAM,CAAC,CAAC;IAC/D,MAAM,SAAS,GAAG,iBAAiB,CAAC,IAAI,CAAC,QAAQ,CAAC,EAAE;QAClD,OAAO,CAAC,cAAc,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;IAC3C,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,SAAS,EAAE;QACd,MAAM,IAAI,eAAe,CAAC,MAAM,EAAE,uCAAuC,CAAC,CAAC;KAC5E;IAED,OAAO,iBAAiB,CAAC,GAAG,EAAE;QAC5B,OAAO,gBAAgB,CAAC,MAAM,CAAC,CAAC;IAClC,CAAC,CAAC,CAAC;AACL,CAAC;AAED,MAAM,UAAU,2BAA2B,CACzC,MAAgB,EAChB,MAAmB;IAEnB,IAAI,sBAAsB,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE;QACtC,OAAO,sBAAsB,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;KAC3C;IAED,MAAM,QAAQ,GAAG,IAAI,iBAAiB,mBACjC,MAAM,IACT,QAAQ,EAAE,KAAK,CAAC,EAAE,CAAC,KAAK,YAAY,MAAM,EAC1C,MAAM,EAAE,sBAAsB,CAAC,MAAM,CAAC,IACtC,CAAC;IAEH,sBAAsB,CAAC,GAAG,CAAC,MAAM,EAAE,QAAQ,CAAC,CAAC;IAC7C,OAAO,QAAQ,CAAC;AAClB,CAAC;AAED,MAAM,UAAU,iBAAiB,CAAC,MAAgB;IAChD,IAAI,CAAC,kBAAkB,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE;QACnC,MAAM,IAAI,eAAe,CACvB,MAAM,EACN,8EAA8E,CAC/E,CAAC;KACH;IAED,MAAM,QAAQ,GAAG,kBAAkB,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;IAChD,OAAO,QAAQ,EAAE,CAAC;AACpB,CAAC\"}","dts":{"name":"/Users/adampietrasiak/dev/oss/typegql/domains/objectType/compiler/objectType.d.ts","writeByteOrderMark":false,"text":"import { GraphQLObjectType } from 'graphql';\r\nexport interface TypeOptions {\r\n    name: string;\r\n    description?: string;\r\n}\r\nexport declare function compileObjectTypeWithConfig(target: Function, config: TypeOptions): GraphQLObjectType;\r\nexport declare function compileObjectType(target: Function): GraphQLObjectType<any, any, {\r\n    [key: string]: any;\r\n}>;\r\n"}}
