{"code":"import { schemaRootsRegistry, } from './registry';\r\nimport { SchemaRootError, SchemaCompilationError } from './error';\r\nfunction hasDuplicates(arr) {\r\n    return (new Set(arr)).size !== arr.length;\r\n}\r\nexport function isSchemaRoot(base) {\r\n    return schemaRootsRegistry.has(base);\r\n}\r\nexport function validateSchemaRoots(roots) {\r\n    if (hasDuplicates(roots)) {\r\n        throw new SchemaCompilationError(\"At least one schema root is provided more than once in schema roots\");\r\n    }\r\n    for (var _i = 0, roots_1 = roots; _i < roots_1.length; _i++) {\r\n        var root = roots_1[_i];\r\n        if (!schemaRootsRegistry.has(root)) {\r\n            throw new SchemaRootError(root, \"Schema root must be registered with @SchemaRoot\");\r\n        }\r\n    }\r\n}\r\nvar schemaRootInstances = new WeakMap();\r\nexport function getSchemaRootInstance(schemaRootClass) {\r\n    if (!isSchemaRoot(schemaRootClass)) {\r\n        return null;\r\n    }\r\n    if (schemaRootInstances.has(schemaRootClass)) {\r\n        return schemaRootInstances.get(schemaRootClass);\r\n    }\r\n    var instance = new schemaRootClass();\r\n    schemaRootInstances.set(schemaRootClass, instance);\r\n    return instance;\r\n}\r\n//# sourceMappingURL=services.js.map","map":"{\"version\":3,\"file\":\"services.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../src/domains/schema/services.ts\"],\"names\":[],\"mappings\":\"AACA,OAAO,EACL,mBAAmB,GACpB,MAAM,YAAY,CAAC;AACpB,OAAO,EAAE,eAAe,EAAE,sBAAsB,EAAE,MAAM,SAAS,CAAC;AAElE,SAAS,aAAa,CAAC,GAAe;IACpC,OAAO,CAAC,IAAI,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,KAAK,GAAG,CAAC,MAAM,CAAC;AAC5C,CAAC;AAED,MAAM,UAAU,YAAY,CAAC,IAAc;IACzC,OAAO,mBAAmB,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;AACvC,CAAC;AAED,MAAM,UAAU,mBAAmB,CAAC,KAAiB;IACnD,IAAI,aAAa,CAAC,KAAK,CAAC,EAAE;QACxB,MAAM,IAAI,sBAAsB,CAAC,qEAAqE,CAAC,CAAC;KACzG;IACD,KAAiB,UAAK,EAAL,eAAK,EAAL,mBAAK,EAAL,IAAK,EAAE;QAAnB,IAAI,IAAI,cAAA;QACX,IAAI,CAAC,mBAAmB,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE;YAClC,MAAM,IAAI,eAAe,CACvB,IAAI,EACJ,iDAAiD,CAClD,CAAC;SACH;KACF;AACH,CAAC;AAED,IAAM,mBAAmB,GAAG,IAAI,OAAO,EAAoB,CAAC;AAE5D,MAAM,UAAU,qBAAqB,CAAC,eAAyB;IAC7D,IAAI,CAAC,YAAY,CAAC,eAAe,CAAC,EAAE;QAClC,OAAO,IAAI,CAAC;KACb;IAED,IAAI,mBAAmB,CAAC,GAAG,CAAC,eAAe,CAAC,EAAE;QAC5C,OAAO,mBAAmB,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC;KACjD;IACD,IAAM,QAAQ,GAAG,IAAK,eAAiC,EAAE,CAAC;IAC1D,mBAAmB,CAAC,GAAG,CAAC,eAAe,EAAE,QAAQ,CAAC,CAAC;IACnD,OAAO,QAAQ,CAAC;AAClB,CAAC\"}"}
