{"code":"import * as tslib_1 from \"tslib\";\r\nimport { GraphQLObjectType } from 'graphql';\r\nimport { ObjectTypeError, objectTypeRegistry } from '../index';\r\nimport { compileAllFields, fieldsRegistry } from '~/domains/field';\r\nimport { createCachedThunk, getClassWithAllParentClasses, } from '~/services/utils';\r\nvar compileOutputTypeCache = new WeakMap();\r\nfunction createTypeFieldsGetter(target) {\r\n    var targetWithParents = getClassWithAllParentClasses(target);\r\n    var hasFields = targetWithParents.some(function (ancestor) {\r\n        return !fieldsRegistry.isEmpty(ancestor);\r\n    });\r\n    if (!hasFields) {\r\n        throw new ObjectTypeError(target, \"There are no fields inside this type.\");\r\n    }\r\n    return createCachedThunk(function () {\r\n        return compileAllFields(target);\r\n    });\r\n}\r\nexport function compileObjectTypeWithConfig(target, config) {\r\n    if (compileOutputTypeCache.has(target)) {\r\n        return compileOutputTypeCache.get(target);\r\n    }\r\n    var compiled = new GraphQLObjectType(tslib_1.__assign({}, config, { isTypeOf: function (value) { return value instanceof target; }, fields: createTypeFieldsGetter(target) }));\r\n    compileOutputTypeCache.set(target, compiled);\r\n    return compiled;\r\n}\r\nexport function compileObjectType(target) {\r\n    if (!objectTypeRegistry.has(target)) {\r\n        throw new ObjectTypeError(target, \"Class is not registered. Make sure it's decorated with @ObjectType decorator\");\r\n    }\r\n    var compiler = objectTypeRegistry.get(target);\r\n    return compiler();\r\n}\r\n//# sourceMappingURL=objectType.js.map","map":"{\"version\":3,\"file\":\"objectType.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/domains/objectType/compiler/objectType.ts\"],\"names\":[],\"mappings\":\";AAAA,OAAO,EAAE,iBAAiB,EAAE,MAAM,SAAS,CAAC;AAC5C,OAAO,EAAE,eAAe,EAAE,kBAAkB,EAAE,MAAM,UAAU,CAAC;AAE/D,OAAO,EAAE,gBAAgB,EAAE,cAAc,EAAE,MAAM,iBAAiB,CAAC;AACnE,OAAO,EACL,iBAAiB,EACjB,4BAA4B,GAC7B,MAAM,kBAAkB,CAAC;AAE1B,IAAM,sBAAsB,GAAG,IAAI,OAAO,EAA+B,CAAC;AAO1E,SAAS,sBAAsB,CAAC,MAAgB;IAC9C,IAAM,iBAAiB,GAAG,4BAA4B,CAAC,MAAM,CAAC,CAAC;IAC/D,IAAM,SAAS,GAAG,iBAAiB,CAAC,IAAI,CAAC,UAAA,QAAQ;QAC/C,OAAO,CAAC,cAAc,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;IAC3C,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,SAAS,EAAE;QACd,MAAM,IAAI,eAAe,CAAC,MAAM,EAAE,uCAAuC,CAAC,CAAC;KAC5E;IAED,OAAO,iBAAiB,CAAC;QACvB,OAAO,gBAAgB,CAAC,MAAM,CAAC,CAAC;IAClC,CAAC,CAAC,CAAC;AACL,CAAC;AAED,MAAM,UAAU,2BAA2B,CACzC,MAAgB,EAChB,MAAmB;IAEnB,IAAI,sBAAsB,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE;QACtC,OAAO,sBAAsB,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;KAC3C;IAED,IAAM,QAAQ,GAAG,IAAI,iBAAiB,sBACjC,MAAM,IACT,QAAQ,EAAE,UAAA,KAAK,IAAI,OAAA,KAAK,YAAY,MAAM,EAAvB,CAAuB,EAC1C,MAAM,EAAE,sBAAsB,CAAC,MAAM,CAAC,IACtC,CAAC;IAEH,sBAAsB,CAAC,GAAG,CAAC,MAAM,EAAE,QAAQ,CAAC,CAAC;IAC7C,OAAO,QAAQ,CAAC;AAClB,CAAC;AAED,MAAM,UAAU,iBAAiB,CAAC,MAAgB;IAChD,IAAI,CAAC,kBAAkB,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE;QACnC,MAAM,IAAI,eAAe,CACvB,MAAM,EACN,8EAA8E,CAC/E,CAAC;KACH;IAED,IAAM,QAAQ,GAAG,kBAAkB,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;IAChD,OAAO,QAAQ,EAAE,CAAC;AACpB,CAAC\"}"}
